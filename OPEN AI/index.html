<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>헉!</title>
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
        <link rel="shortcut icon" type="image/x-icon" href="download-removebg-preview.ico">

        <script src="script.js"></script>
    </head>
    <body>
    <main>
        <div id="container">
        <div id="header">
            <div class="switch">
            <span class="btn-toggle"></span>
            </div><img src="channels4_profile-removebg-preview.png" alt="My Image" width="140"><p id="tittle">Q&A bot with Open Ai</p>
            </div>
        <div id="contents">
        <div class="chat-content">
            <div class="line">
              <span class="chat-box">Hello World!</span>
            </div>
            <div class="line">
            </div>
          </div>
          <div id="foot">
          <input class="chat-box" id="input">
          <button id="send">send</button>
          </div>

          <script src="https://cdn.jsdelivr.net/npm/axios@1.1.3/dist/axios.min.js"></script>

          <script type="module">
            import { Configuration, OpenAIApi } from 'https://cdn.skypack.dev/openai';
        
            document.querySelector('#input').addEventListener('keypress', function(e){
                if(e.key === 'Enter'){
              var template = `<div class="line">
                <span class="chat-box mine">${ document.querySelector('#input').value }</span>
              </div>`
              document.querySelector('.chat-content').insertAdjacentHTML('beforeend', template);
        
              
        
              const configuration = new Configuration({
                apiKey: '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',
              });
              const openai = new OpenAIApi(configuration);
        
              openai.createCompletion({
                model: "text-davinci-002",
                prompt: document.querySelector('#input').value,
                temperature: 0.7,
                max_tokens: 256,
                top_p: 1,
                frequency_penalty: 0,
                presence_penalty: 0,
              }).then((result)=>{
                console.log(result.data.choices[0].text)
                var template = `<div class="line">
                  <span class="chat-box">${ result.data.choices[0].text }</span>
                </div>`
                document.querySelector('.chat-content').insertAdjacentHTML('beforeend', template);
              })}
        
            })
          </script>
        </div>
        </div>
        <!-- 채현서/김신/김현빈/김영진/이성우/허현재 -->
    </main>
    </body>